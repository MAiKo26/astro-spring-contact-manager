---
import type {GetStaticPaths} from "astro";
export const getStaticPaths = async () => {
  const API = "http://localhost:8080/contacts";
  const response = await fetch(API);
  const data = await response.json();

  return [
    {
      params: {slug: "0"},
    },
  ];
};
---

<>
  <a href={"/contacts"} class="link"
    ><i class="bi bi-arrow-left"></i> Back to list</a
  >
  <div class="profile">
    <div class="profile__details">
      <img src={contact.photoUrl} alt={`Profile photo of ${contact.name}`} />
      <div class="profile__metadata">
        <p class="profile__name">{contact.name}</p>
        <p class="profile__muted">JPG, GIF, or PNG. Max size of 10MG</p>
        <button onClick={selectImage} class="btn"
          ><i class="bi bi-cloud-upload"></i> Change Photo</button
        >
      </div>
    </div>
    <div class="profile__settings">
      <div>
        <form onSubmit={onUpdateContact} class="form">
          <div class="user-details">
            <input type="hidden" defaultValue={contact.id} name="id" required />
            <div class="input-box">
              <span class="details">Name</span>
              <input
                type="text"
                value={contact.name}
                onChange={onChange}
                name="name"
                required
              />
            </div>
            <div class="input-box">
              <span class="details">Email</span>
              <input
                type="text"
                value={contact.email}
                onChange={onChange}
                name="email"
                required
              />
            </div>
            <div class="input-box">
              <span class="details">Phone</span>
              <input
                type="text"
                value={contact.phone}
                onChange={onChange}
                name="phone"
                required
              />
            </div>
            <div class="input-box">
              <span class="details">Address</span>
              <input
                type="text"
                value={contact.address}
                onChange={onChange}
                name="address"
                required
              />
            </div>
            <div class="input-box">
              <span class="details">Title</span>
              <input
                type="text"
                value={contact.title}
                onChange={onChange}
                name="title"
                required
              />
            </div>
            <div class="input-box">
              <span class="details">Status</span>
              <input
                type="text"
                value={contact.status}
                onChange={onChange}
                name="status"
                required
              />
            </div>
          </div>
          <div class="form_footer">
            <button type="submit" class="btn">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <form style={{display: "none"}}>
    <input
      type="file"
      ref={inputRef}
      onChange={(event) => udpatePhoto(event.target.files[0])}
      name="file"
      accept="image/*"
    />
  </form>
</>
